\documentclass[11pt]{beamer}
\usetheme{Madrid}
\usefonttheme{serif}

\usepackage[utf8]{inputenc}       % Encoding
\usepackage[english]{babel}       % Language
\usepackage[T1]{fontenc}          % Font encoding

\usepackage{amsmath, amsfonts, amssymb} % Math packages
\usepackage{graphicx}
\usepackage{float}
\usepackage{xcolor}
\usepackage{colortbl}
\usepackage{array}
\usepackage{subcaption}

\usepackage{tikz}
\usepackage{tikz-uml}
\usetikzlibrary{arrows.meta, positioning, calc}
\usepackage{blkarray}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

%Tabular
\usepackage{tabularx}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{arydshln}

% Code formatting
\usepackage{minted}
\usepackage{adjustbox}
\usepackage[ruled,vlined]{algorithm2e}
\SetKwProg{While}{while}{}{}
\SetKwProg{For}{for}{}{}
\SetKwProg{Function}{function}{}{}

% Custom math operators
\DeclareMathOperator{\sen}{sen}
\DeclareMathOperator{\tg}{tg}

% Numbered captions in figures/tables
\setbeamertemplate{caption}[numbered]

\usepackage{dirtree}

% Metadata
\author[Mathys Vinatier]{Mathys Vinatier}
\title{PPO Market Bot}
\setbeamercovered{transparent}
\setbeamertemplate{navigation symbols}{}
\logo{\includegraphics[scale=.05]{../img/logoSNU.png}}
\institute[]{Seoul National University}
\date{\today}

% Bibliography
\usepackage{biblatex} 
\addbibresource{../references.bib}
\usepackage{csquotes}

%Glossary
\usepackage[acronym]{glossaries}
\makeglossaries
\input{../glossary.tex}

\begin{document}

\begin{frame}
    \titlepage
\end{frame}

\begin{frame}{Optuna Optimization Overview}

    \vfill

    \begin{minipage}{0.49\linewidth}
        \centering
        \includegraphics[width=\linewidth]{../img/OPTUNA_1/optuna_trial_duration.png}
        \captionof{figure}{Duration of individual Optuna trials}
    \end{minipage}
    \hfill
    \begin{minipage}{0.49\linewidth}
        \centering
        \includegraphics[width=\linewidth]{../img/OPTUNA_1/optuna_hyperparam_importance.png}
        \captionof{figure}{Relative importance of hyperparameters}
    \end{minipage}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial Performance}
    \centering
    \includegraphics[width=0.8\linewidth]{../img/OPTUNA_1/optuna_trial_goals.png}
    \captionof{figure}{Overview of Optuna trial performance metrics}
\end{frame}


\begin{frame}{Optuna Optimization - Trial \#01}

    \vfill

    \begin{figure}[H]
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_001_train.png}
    \end{figure}

    \vfill

    \begin{figure}[H]
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_001_test.png}
        \caption{Trial 1 Training and Testing results}
    \end{figure}

    \vfill

\end{frame}
\begin{frame}{Optuna Optimization - Trial \#01}

    \vfill

    \begin{figure}[H]
        \centering
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Episode} & \textbf{Epochs} & \textbf{Batch size} & \textbf{Learning rate} \\ \hline
            136 & 23 & 128 & 0.36 \\ 
            \hline
        \end{tabular}
        } \\[6pt]
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Average profit (/year)} & \textbf{Average return} & \textbf{Annual return} & \textbf{Sharpe ratio} \\ \hline
            \$10{,}000 & 0.003 & 2.69 & 0.273 \\ 
            \hline
        \end{tabular}
        }
        \caption{Overview of Trial 1 parameters and results}
    \end{figure}

    \vfill
\end{frame}

\begin{frame}{Optuna Optimization - Trial \#51}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_051_train.png}
    \end{figure}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_051_test.png}
        \caption{Trial 51 - Training and Testing Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#51}

    \vfill

    \begin{figure}
        \centering
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Episode} & \textbf{Epochs} & \textbf{Batch Size} & \textbf{Learning Rate} \\ \hline
            195 & 25 & 64 & 0.52 \\ 
            \hline
        \end{tabular}
        } \\[6pt]
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Average Profit (/year)} & \textbf{Average Return} & \textbf{Annual Return} & \textbf{Sharpe Ratio} \\ \hline
            \$11{,}000 & -0.014 & 0.62 & -0.339 \\ 
            \hline
        \end{tabular}
        }
        \caption{Overview of Trial 51 Parameters and Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#14}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_014_train.png}
    \end{figure}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_014_test.png}
        \caption{Trial 14 - Training and Testing Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#14}

    \vfill

    \begin{figure}
        \centering
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Episode} & \textbf{Epochs} & \textbf{Batch Size} & \textbf{Learning Rate} \\ \hline
            194 & 72 & 128 & 1.00 \\ 
            \hline
        \end{tabular}
        } \\[6pt]
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Average Profit (/year)} & \textbf{Average Return} & \textbf{Annual Return} & \textbf{Sharpe Ratio} \\ \hline
            \$16{,}000 & 0.026 & 36.27 & 0.181 \\ 
            \hline
        \end{tabular}
        }
        \caption{Overview of Trial 14 Parameters and Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#33}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_033_train.png}
    \end{figure}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_033_test.png}
        \caption{Trial 33 - Training and Testing Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#33}

    \vfill

    \begin{figure}
        \centering
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Episode} & \textbf{Epochs} & \textbf{Batch Size} & \textbf{Learning Rate} \\ \hline
            127 & 33 & 32 & 0.32 \\ 
            \hline
        \end{tabular}
        } \\[6pt]
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Average Profit (/year)} & \textbf{Average Return} & \textbf{Annual Return} & \textbf{Sharpe Ratio} \\ \hline
            \$17{,}000 & 0.004 & 0.69 & 0.880 \\ 
            \hline
        \end{tabular}
        }
        \caption{Overview of Trial 33 Parameters and Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#22}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_022_train.png}
    \end{figure}

    \vfill

    \begin{figure}
        \centering
        \includegraphics[width=.7\linewidth]{../img/OPTUNA_1/trial_022_test.png}
        \caption{Trial 22 - Training and Testing Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Optimization - Trial \#22}

    \vfill

    \begin{figure}
        \centering
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Episode} & \textbf{Epochs} & \textbf{Batch Size} & \textbf{Learning Rate} \\ \hline
            199 & 58 & 128 & 0.96 \\ 
            \hline
        \end{tabular}
        } \\[6pt]
        \scalebox{.8}{
        \begin{tabular}{|c|c|c|c|}
            \hline
            \textbf{Average Profit (/year)} & \textbf{Average Return} & \textbf{Annual Return} & \textbf{Sharpe Ratio} \\ \hline
            \$20{,}000 & 0.024 & 7.68 & 0.792 \\ 
            \hline
        \end{tabular}
        }
        \caption{Overview of Trial 22 Parameters and Results}
    \end{figure}

    \vfill

\end{frame}

\begin{frame}{Optuna Results Overview - Performance Metrics}

    \vfill

    \centering
    \scalebox{0.7}{
    \begin{tabular}{|c|c|c|c|c|}
        \hline
        \textbf{Trial} & \textbf{Reward} & \textbf{Average Return} & \textbf{Annual Return} & \textbf{Sharpe Ratio} \\ \hline
        \textit{01} & $158$M & $0.003$ & $2.69$ & $0.273$ \\
        \textit{14} & $106$M & $0.026$ & $36.27$ & $0.181$ \\
        \textit{22} & $102$M & $0.024$ & $7.68$ & $0.792$ \\
        \textit{33} & $65$M & $0.004$ & $0.69$ & $0.880$ \\
        \textit{51} & $107$M & $-0.014$ & $0.62$ & $-0.339$ \\
        \hline
    \end{tabular}
    }

    \vfill

    \captionof{table}{Overview of each trial's performance}

\end{frame}

\begin{frame}{Optuna Results Overview - Model Parameters}

    \vfill

    \centering
    \scalebox{0.7}{
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
        \textbf{Trial} & \textbf{Episode} & \textbf{Epochs} & \textbf{Batch Size} & \textbf{Learning Rate} & \textbf{Average Profit (\$/year)} \\ \hline
        \textit{01} & $136$ & $23$ & $128$ & $0.36$ & \$10k \\
        \textit{14} & $194$ & $72$ & $128$ & $1.00$ & \$16k \\
        \textit{22} & $199$ & $58$ & $128$ & $0.96$ & \$20k \\
        \textit{33} & $127$ & $33$ & $32$ & $0.32$ & \$17k \\
        \textit{51} & $195$ & $25$ & $64$ & $0.52$ & \$11k \\
        \hline
    \end{tabular}
    }

    \vfill

    \captionof{table}{Overview of trial hyperparameters}

\end{frame}

\begin{frame}{Fine-Tuning the Model - Next Steps}

    \begin{center}
        - \textbf{Optimization Objective :} Redefine Optuna's objective to use the \textbf{Sharpe ratio}

        \vspace{0.5cm}

        - \textbf{Tick Interval Adjustment :} Modify the tick interval to a \textbf{5-minute timeframe}

        \vspace{0.5cm}

        - \textbf{Additional Input Features :} Introduce new input variables such as the \textbf{VVIX} and the \textbf{S\&P 500 index} or maybe other market
    \end{center}

\end{frame}


\begin{frame}
    \centering
    \vspace{2cm}
    {\LARGE Thank You}
\end{frame}

\end{document}
